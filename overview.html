<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Overview &#8212; CytoTable v0.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=99150370" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=01d9ba92" />
    <script src="_static/documentation_options.js?v=2fea6348"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/mermaid@11.12.1/dist/mermaid.esm.min.mjs"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@mermaid-js/layout-elk@0.2.0/dist/mermaid-layout-elk.esm.min.mjs"></script>
    <script type="module">import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@11.12.1/dist/mermaid.esm.min.mjs";import elkLayouts from "https://cdn.jsdelivr.net/npm/@mermaid-js/layout-elk@0.2.0/dist/mermaid-layout-elk.esm.min.mjs";mermaid.registerLayoutLoaders(elkLayouts);mermaid.initialize({startOnLoad:false});</script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script>
    <script type="module">import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@11.12.1/dist/mermaid.esm.min.mjs";

const defaultStyle = document.createElement('style');
defaultStyle.textContent = `pre.mermaid {
    /* Same as .mermaid-container > pre */
    display: block;
    width: 100%;
}

pre.mermaid > svg {
    /* Same as .mermaid-container > pre > svg */
    height: 500px;
    width: 100%;
    max-width: 100% !important;
}
`;
document.head.appendChild(defaultStyle);

const fullscreenStyle = document.createElement('style');
fullscreenStyle.textContent = `.mermaid-container {
    display: flex;
    flex-direction: row;
    width: 100%;
}

.mermaid-container > pre {
    display: block;
    width: 100%;
}

.mermaid-container > pre > svg {
    height: 500px;
    width: 100%;
    max-width: 100% !important;
}

.mermaid-fullscreen-btn {
    width: 28px;
    height: 28px;
    background: rgba(255, 255, 255, 0.95);
    border: 1px solid rgba(0, 0, 0, 0.3);
    border-radius: 4px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
    font-size: 14px;
    line-height: 1;
    padding: 0;
    color: #333;
}

.mermaid-fullscreen-btn:hover {
    opacity: 100% !important;
    background: rgba(255, 255, 255, 1);
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
    transform: scale(1.1);
}

.mermaid-fullscreen-btn.dark-theme {
    background: rgba(50, 50, 50, 0.95);
    border: 1px solid rgba(255, 255, 255, 0.3);
    color: #e0e0e0;
}

.mermaid-fullscreen-btn.dark-theme:hover {
    background: rgba(60, 60, 60, 1);
    box-shadow: 0 3px 10px rgba(255, 255, 255, 0.2);
}

.mermaid-fullscreen-modal {
    display: none;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 95vw;
    height: 100vh;
    background: rgba(255, 255, 255, 0.98);
    z-index: 9999;
    padding: 20px;
    overflow: auto;
}

.mermaid-fullscreen-modal.dark-theme {
    background: rgba(0, 0, 0, 0.98);
}

.mermaid-fullscreen-modal.active {
    display: flex;
    align-items: center;
    justify-content: center;
}

.mermaid-container-fullscreen {
    position: relative;
    width: 95vw;
    height: 90vh;
    max-width: 95vw;
    max-height: 90vh;
    background: white;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    overflow: auto;
    display: flex;
    align-items: center;
    justify-content: center;
}

.mermaid-container-fullscreen.dark-theme {
    background: #1a1a1a;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8);
}

.mermaid-container-fullscreen pre.mermaid {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.mermaid-container-fullscreen .mermaid svg {
    height: 100% !important;
    width: 100% !important;
    cursor: grab;
}

.mermaid-fullscreen-close {
    position: fixed !important;
    top: 20px !important;
    right: 20px !important;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.95);
    border: 1px solid rgba(0, 0, 0, 0.2);
    border-radius: 50%;
    cursor: pointer;
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    transition: all 0.2s;
    font-size: 24px;
    line-height: 1;
    color: #333;
}

.mermaid-fullscreen-close:hover {
    background: white;
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4);
    transform: scale(1.1);
}

.mermaid-fullscreen-close.dark-theme {
    background: rgba(50, 50, 50, 0.95);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: #e0e0e0;
}

.mermaid-fullscreen-close.dark-theme:hover {
    background: rgba(60, 60, 60, 1);
    box-shadow: 0 6px 16px rgba(255, 255, 255, 0.2);
}

.mermaid-fullscreen-modal .mermaid-fullscreen-btn {
    display: none !important;
}`;
document.head.appendChild(fullscreenStyle);

// Detect if page has dark background
const isDarkTheme = () => {
    const bgColor = window.getComputedStyle(document.body).backgroundColor;
    const match = bgColor.match(/rgb\((\d+),\s*(\d+),\s*(\d+)/);
    if (match) {
        const r = parseInt(match[1]);
        const g = parseInt(match[2]);
        const b = parseInt(match[3]);
        const brightness = (r * 299 + g * 587 + b * 114) / 1000;
        return brightness < 128;
    }
    return false;
};

const load = async () => {
    await mermaid.run();

    const all_mermaids = document.querySelectorAll(".mermaid");
    const mermaids_processed = document.querySelectorAll(".mermaid[data-processed='true']");

    if ("False" === "True") {
        const mermaids_to_add_zoom = -1 === -1 ? all_mermaids.length : -1;
        if(mermaids_to_add_zoom > 0) {
            var svgs = d3.selectAll("");
            if(all_mermaids.length !== mermaids_processed.length) {
                setTimeout(load, 200);
                return;
            } else if(svgs.size() !== mermaids_to_add_zoom) {
                setTimeout(load, 200);
                return;
            } else {
                svgs.each(function() {
                    var svg = d3.select(this);
                    svg.html("<g class='wrapper'>" + svg.html() + "</g>");
                    var inner = svg.select("g");
                    var zoom = d3.zoom().on("zoom", function(event) {
                        inner.attr("transform", event.transform);
                    });
                    svg.call(zoom);
                });
            }
        }
    } else if(all_mermaids.length !== mermaids_processed.length) {
        // Wait for mermaid to process all diagrams
        setTimeout(load, 200);
        return;
    }

    const darkTheme = isDarkTheme();

    // Stop here if not adding fullscreen capability
    if ("True" !== "True") return;

    const modal = document.createElement('div');
    modal.className = 'mermaid-fullscreen-modal' + (darkTheme ? ' dark-theme' : '');
    modal.setAttribute('role', 'dialog');
    modal.setAttribute('aria-modal', 'true');
    modal.setAttribute('aria-label', 'Fullscreen diagram viewer');
    modal.innerHTML = `
        <button class="mermaid-fullscreen-close${darkTheme ? ' dark-theme' : ''}" aria-label="Close fullscreen">✕</button>
        <div class="mermaid-container-fullscreen${darkTheme ? ' dark-theme' : ''}"></div>
    `;
    document.body.appendChild(modal);

    const modalContent = modal.querySelector('.mermaid-container-fullscreen');
    const closeBtn = modal.querySelector('.mermaid-fullscreen-close');

    let previousScrollOffset = [window.scrollX, window.scrollY];

    const closeModal = () => {
        modal.classList.remove('active');
        modalContent.innerHTML = '';
        document.body.style.overflow = ''
        window.scrollTo({left: previousScrollOffset[0], top: previousScrollOffset[1], behavior: 'instant'});
    };

    closeBtn.addEventListener('click', closeModal);
    modal.addEventListener('click', (e) => {
        if (e.target === modal) closeModal();
    });
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && modal.classList.contains('active')) {
            closeModal();
        }
    });

    const allButtons = [];

    document.querySelectorAll('.mermaid').forEach((mermaidDiv) => {
        if (mermaidDiv.parentNode.classList.contains('mermaid-container') ||
            mermaidDiv.closest('.mermaid-fullscreen-modal')) {
            return;
        }

        const container = document.createElement('div');
        container.className = 'mermaid-container';
        mermaidDiv.parentNode.insertBefore(container, mermaidDiv);
        container.appendChild(mermaidDiv);

        const fullscreenBtn = document.createElement('button');
        fullscreenBtn.className = 'mermaid-fullscreen-btn' + (darkTheme ? ' dark-theme' : '');
        fullscreenBtn.setAttribute('aria-label', 'View diagram in fullscreen');
        fullscreenBtn.textContent = '⛶';
        fullscreenBtn.style.opacity = '50%';

        // Calculate dynamic position based on diagram's margin and padding
        const diagramStyle = window.getComputedStyle(mermaidDiv);
        const marginTop = parseFloat(diagramStyle.marginTop) || 0;
        const marginRight = parseFloat(diagramStyle.marginRight) || 0;
        const paddingTop = parseFloat(diagramStyle.paddingTop) || 0;
        const paddingRight = parseFloat(diagramStyle.paddingRight) || 0;
        fullscreenBtn.style.top = `${marginTop + paddingTop + 4}px`;
        fullscreenBtn.style.right = `${marginRight + paddingRight + 4}px`;

        fullscreenBtn.addEventListener('click', () => {
            previousScrollOffset = [window.scroll, window.scrollY];
            const clone = mermaidDiv.cloneNode(true);
            modalContent.innerHTML = '';
            modalContent.appendChild(clone);

            const svg = clone.querySelector('svg');
            if (svg) {
                svg.removeAttribute('width');
                svg.removeAttribute('height');
                svg.style.width = '100%';
                svg.style.height = 'auto';
                svg.style.maxWidth = '100%';
                svg.style.sdisplay = 'block';

                if ("False" === "True") {
                    setTimeout(() => {
                        const g = svg.querySelector('g');
                        if (g) {
                            var svgD3 = d3.select(svg);
                            svgD3.html("<g class='wrapper'>" + svgD3.html() + "</g>");
                            var inner = svgD3.select("g");
                            var zoom = d3.zoom().on("zoom", function(event) {
                                inner.attr("transform", event.transform);
                            });
                            svgD3.call(zoom);
                        }
                    }, 100);
                }
            }

            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        });

        container.appendChild(fullscreenBtn);
        allButtons.push(fullscreenBtn);
    });

    // Update theme classes when theme changes
    const updateTheme = () => {
        const dark = isDarkTheme();
        allButtons.forEach(btn => {
            if (dark) {
                btn.classList.add('dark-theme');
            } else {
                btn.classList.remove('dark-theme');
            }
        });
        if (dark) {
            modal.classList.add('dark-theme');
            modalContent.classList.add('dark-theme');
            closeBtn.classList.add('dark-theme');
        } else {
            modal.classList.remove('dark-theme');
            modalContent.classList.remove('dark-theme');
            closeBtn.classList.remove('dark-theme');
        }
    };

    // Watch for theme changes
    const observer = new MutationObserver(updateTheme);
    observer.observe(document.documentElement, {
        attributes: true,
        attributeFilter: ['class', 'style', 'data-theme']
    });
    observer.observe(document.body, {
        attributes: true,
        attributeFilter: ['class', 'style']
    });
};

window.addEventListener("load", load);
</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tutorials" href="tutorials.html" />
    <link rel="prev" title="CytoTable" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h1>
<p>This page provides a brief overview of CytoTable topics.
For a brief introduction on how to use CytoTable, please see the <a class="reference internal" href="tutorials.html"><span class="std std-doc">tutorials</span></a> page.</p>
<section id="presets-and-manual-overrides">
<h2>Presets and Manual Overrides<a class="headerlink" href="#presets-and-manual-overrides" title="Link to this heading">¶</a></h2>
<p>Various preset configurations are available for use within CytoTable which affect how data are read and produced under <a class="reference internal" href="python-api.html#cytotable.presets.config" title="cytotable.presets.config"><code class="xref py py-data docutils literal notranslate"><span class="pre">presets.config</span></code></a>.
These presets are intended to assist with common data source expectations.
By default, CytoTable will use the “cellprofiler_csv” preset.
Please note that these presets may not capture all possible outcomes.
Use manual overrides within <a class="reference internal" href="python-api.html#cytotable.convert.convert" title="cytotable.convert.convert"><code class="xref py py-mod docutils literal notranslate"><span class="pre">convert()</span></code></a> as needed.</p>
</section>
<section id="data-sources">
<h2>Data Sources<a class="headerlink" href="#data-sources" title="Link to this heading">¶</a></h2>
<pre  class="mermaid">
        flowchart LR
    images[(&quot;Image\nfile(s)&quot;)]:::outlined --&gt; image-tools[Image Analysis Tools]:::outlined
    image-tools --&gt; measurements[(&quot;Measurement\nfile(s)&quot;)]:::green
    measurements --&gt; CytoTable:::green

    classDef outlined fill:#fff,stroke:#333
    classDef green fill:#97F0B4,stroke:#333
    </pre><p>Data sources for CytoTable are measurement data created from other cell biology image analysis tools.
These measurement data are the focus of the data source content which follows.</p>
<section id="data-source-locations">
<h3>Data Source Locations<a class="headerlink" href="#data-source-locations" title="Link to this heading">¶</a></h3>
<p>Data sources may be provided to CytoTable using local filepaths or remote object-storage filepaths (for example, AWS S3, GCP Cloud Storage, Azure Storage).
We use <a class="reference external" href="https://cloudpathlib.drivendata.org/~latest/">cloudpathlib</a>  under the hood to reference files in a unified way, whether they’re local or remote.</p>
<section id="cloud-data-sources">
<h4>Cloud Data Sources<a class="headerlink" href="#cloud-data-sources" title="Link to this heading">¶</a></h4>
<p>CytoTable uses <a class="reference external" href="https://cloudpathlib.drivendata.org/~latest/">cloudpathlib</a> to access cloud-based data sources.
CytoTable supports:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/Amazon_S3">Amazon S3</a>: <code class="docutils literal notranslate"><span class="pre">s3://bucket_name/object_name</span></code></p></li>
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/Google_Cloud_Storage">Google Cloud Storage</a>: <code class="docutils literal notranslate"><span class="pre">gc://bucket_name/object_name</span></code></p></li>
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/Microsoft_Azure#Storage_services">Azure Blob Storage</a>: <code class="docutils literal notranslate"><span class="pre">az://container_name/blob_name</span></code></p></li>
</ul>
<section id="cloud-service-configuration-and-authentication">
<h5>Cloud Service Configuration and Authentication<a class="headerlink" href="#cloud-service-configuration-and-authentication" title="Link to this heading">¶</a></h5>
<p>Remote object storage paths which require authentication or other specialized configuration may use cloudpathlib client arguments (<a class="reference external" href="https://cloudpathlib.drivendata.org/~latest/api-reference/s3client/">S3Client</a>, <a class="reference external" href="https://cloudpathlib.drivendata.org/~latest/api-reference/azblobclient/">AzureBlobClient</a>, <a class="reference external" href="https://cloudpathlib.drivendata.org/~latest/api-reference/gsclient/">GSClient</a>) and <code class="code docutils literal notranslate"><span class="pre">convert(...,</span> <span class="pre">**kwargs)</span></code> (<a class="reference internal" href="python-api.html#cytotable.convert.convert" title="cytotable.convert.convert"><code class="xref py py-mod docutils literal notranslate"><span class="pre">convert()</span></code></a>).</p>
<p>For example, remote AWS S3 paths which are public-facing and do not require authentication (like, or similar to, <code class="code docutils literal notranslate"><span class="pre">aws</span> <span class="pre">s3</span> <span class="pre">...</span> <span class="pre">--no-sign-request</span></code>) may be used via <code class="code docutils literal notranslate"><span class="pre">convert(...,</span> <span class="pre">no_sign_request=True)</span></code> (<a class="reference internal" href="python-api.html#cytotable.convert.convert" title="cytotable.convert.convert"><code class="xref py py-mod docutils literal notranslate"><span class="pre">convert()</span></code></a>).</p>
<p>Each cloud service provider may have different requirements for authentication (there is no fully unified API for these).
Please see the <a class="reference external" href="https://cloudpathlib.drivendata.org/~latest/">cloudpathlib</a> client documentation for more information on which arguments may be used for configuration with specific cloud providers (for example, <a class="reference external" href="https://cloudpathlib.drivendata.org/stable/api-reference/s3client/"><code class="docutils literal notranslate"><span class="pre">S3Client</span></code></a>, <a class="reference external" href="https://cloudpathlib.drivendata.org/stable/api-reference/gsclient/"><code class="docutils literal notranslate"><span class="pre">GSClient</span></code></a>, or <a class="reference external" href="https://cloudpathlib.drivendata.org/stable/api-reference/azblobclient/"><code class="docutils literal notranslate"><span class="pre">AzureBlobClient</span></code></a>).</p>
</section>
<section id="cloud-service-file-type-parsing-differences">
<h5>Cloud Service File Type Parsing Differences<a class="headerlink" href="#cloud-service-file-type-parsing-differences" title="Link to this heading">¶</a></h5>
<p>Data sources retrieved from cloud services are not all treated the same due to technical constraints.
See below for a description of how each file type is treated for a better understanding of expectations.</p>
<p><strong>Comma-separated values (.csv)</strong>:</p>
<p>CytoTable reads cloud-based CSV files directly.</p>
<p><strong>SQLite Databases (.sqlite)</strong>:</p>
<p>CytoTable downloads cloud-based SQLite databases locally before other CytoTable processing.
This is necessary to account for differences in how <a class="reference external" href="https://www.sqlite.org/vfs.html">SQLite’s virtual file system (VFS)</a> operates in context with cloud service object storage.</p>
<p>Note: Large SQLite files stored in the cloud may benefit from explicit local cache specification through a special keyword argument (<code class="docutils literal notranslate"><span class="pre">**kwarg</span></code>) passed through CytoTable to <code class="docutils literal notranslate"><span class="pre">cloudpathlib</span></code> called <code class="docutils literal notranslate"><span class="pre">local_cache_dir</span></code>. See <a class="reference external" href="https://cloudpathlib.drivendata.org/~latest/caching/#keeping-the-cache-around">the cloudpathlib documentation on caching</a>.
This argument helps ensure constraints surrounding temporary local file storage locations do not impede the ability to download or work with the data (for example, file size limitations and periodic deletions outside of CytoTable might be encountered within default OS temporary file storage locations).</p>
<p>A quick example of how this argument is used: <code class="code docutils literal notranslate"><span class="pre">convert(...,</span> <span class="pre">local_cache_dir=&quot;non_temporary_directory&quot;,</span> <span class="pre">...)</span></code> (<a class="reference internal" href="python-api.html#cytotable.convert.convert" title="cytotable.convert.convert"><code class="xref py py-mod docutils literal notranslate"><span class="pre">convert()</span></code></a>).</p>
<p>Future work to enable direct SQLite data access from cloud locations for CytoTable will be documented within GitHub issue <a class="reference external" href="https://github.com/cytomining/CytoTable/issues/70">CytoTable/#70</a>.</p>
<p><strong>NumPy Zipped Archive (.npz)</strong>:</p>
<p>CytoTable downloads cloud-based NPZ archives locally before other CytoTable processing.
This is due to the complexity of random access within the context of a zipped file stored within the cloud.
Please note the content above mentioned about SQLite, which also applies to NPZ files.</p>
</section>
</section>
</section>
<section id="data-source-types">
<h3>Data Source Types<a class="headerlink" href="#data-source-types" title="Link to this heading">¶</a></h3>
<p>Data source compatibility for CytoTable is focused (but not explicitly limited to) the following.</p>
<section id="cellprofiler-data-sources">
<h4>CellProfiler Data Sources<a class="headerlink" href="#cellprofiler-data-sources" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><strong>Comma-separated values (.csv)</strong>: “A comma-separated values (CSV) file is a delimited text file that uses a comma to separate values.” (<a class="reference external" href="https://en.wikipedia.org/wiki/Comma-separated_values">reference</a>)
CellProfiler CSV data sources generally follow the format provided as output by <a class="reference external" href="https://cellprofiler-manual.s3.amazonaws.com/CPmanual/ExportToSpreadsheet.html">CellProfiler ExportToSpreadsheet</a>.</p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p><strong>Manual specification:</strong> CSV data source types may be manually specified by using <code class="code docutils literal notranslate"><span class="pre">convert(...,</span> <span class="pre">source_datatype=&quot;csv&quot;,</span> <span class="pre">...)</span></code> (<a class="reference internal" href="python-api.html#cytotable.convert.convert" title="cytotable.convert.convert"><code class="xref py py-mod docutils literal notranslate"><span class="pre">convert()</span></code></a>).</p></li>
<li><p><strong>Preset specification:</strong> CSV data sources from CellProfiler may use the configuration preset <code class="code docutils literal notranslate"><span class="pre">convert(...,</span> <span class="pre">preset=&quot;cellprofiler_csv&quot;,</span> <span class="pre">...)</span></code> (<a class="reference internal" href="python-api.html#cytotable.convert.convert" title="cytotable.convert.convert"><code class="xref py py-mod docutils literal notranslate"><span class="pre">convert()</span></code></a>).</p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p><strong>SQLite Databases (.sqlite)</strong>: “SQLite database files are commonly used as containers to transfer rich content between systems and as a long-term archival format for data.” (<a class="reference external" href="https://sqlite.org/index.html">reference</a>)
CellProfiler SQLite database sources may follow a format provided as output by <a class="reference external" href="https://cellprofiler-manual.s3.amazonaws.com/CPmanual/ExportToDatabase.html">CellProfiler ExportToDatabase</a> or <a class="reference external" href="https://github.com/cytomining/cytominer-database">cytominer-database</a>.</p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p><strong>Manual specification:</strong> SQLite data source types may be manually specified by using <code class="code docutils literal notranslate"><span class="pre">convert(...,</span> <span class="pre">source_datatype=&quot;sqlite&quot;,</span> <span class="pre">...)</span></code> (<a class="reference internal" href="python-api.html#cytotable.convert.convert" title="cytotable.convert.convert"><code class="xref py py-mod docutils literal notranslate"><span class="pre">convert()</span></code></a>).</p></li>
<li><p><strong>Preset specification:</strong> SQLite data sources from CellProfiler may use the configuration preset <code class="code docutils literal notranslate"><span class="pre">convert(...,</span> <span class="pre">preset=&quot;cellprofiler_sqlite&quot;,</span> <span class="pre">...)</span></code> (<a class="reference internal" href="python-api.html#cytotable.convert.convert" title="cytotable.convert.convert"><code class="xref py py-mod docutils literal notranslate"><span class="pre">convert()</span></code></a>).</p></li>
</ul>
</div></blockquote>
</section>
<section id="deepprofiler-data-sources">
<h4>DeepProfiler Data Sources<a class="headerlink" href="#deepprofiler-data-sources" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><strong>NumPy Zipped Archive (.npz)</strong>: <a class="reference external" href="https://github.com/cytomining/DeepProfiler">DeepProfiler</a> software provides output data in <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.lib.npyio.NpzFile.html#numpy.lib.npyio.NpzFile">NPZ format</a>.</p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p><strong>Manual specification:</strong> NPZ data source types may be manually specified by using <code class="code docutils literal notranslate"><span class="pre">convert(...,</span> <span class="pre">source_datatype=&quot;npz&quot;,</span> <span class="pre">...)</span></code> (<a class="reference internal" href="python-api.html#cytotable.convert.convert" title="cytotable.convert.convert"><code class="xref py py-mod docutils literal notranslate"><span class="pre">convert()</span></code></a>).</p></li>
<li><p><strong>Preset specification:</strong> NPZ data from DeepProfiler may be converted through CytoTable by using the following preset <code class="code docutils literal notranslate"><span class="pre">convert(...,</span> <span class="pre">preset=&quot;deepprofiler&quot;,</span> <span class="pre">...)</span></code> (<a class="reference internal" href="python-api.html#cytotable.convert.convert" title="cytotable.convert.convert"><code class="xref py py-mod docutils literal notranslate"><span class="pre">convert()</span></code></a>).</p></li>
</ul>
</div></blockquote>
</section>
<section id="in-carta-data-sources">
<h4>IN Carta Data Sources<a class="headerlink" href="#in-carta-data-sources" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><strong>Comma-separated values (.csv)</strong>: <a class="reference external" href="https://www.moleculardevices.com/products/cellular-imaging-systems/high-content-analysis/in-carta-image-analysis-software">Molecular Devices IN Carta</a> software provides output data in CSV format.</p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p><strong>Manual specification:</strong> CSV data source types may be manually specified by using <code class="code docutils literal notranslate"><span class="pre">convert(...,</span> <span class="pre">source_datatype=&quot;csv&quot;,</span> <span class="pre">...)</span></code> (<a class="reference internal" href="python-api.html#cytotable.convert.convert" title="cytotable.convert.convert"><code class="xref py py-mod docutils literal notranslate"><span class="pre">convert()</span></code></a>).</p></li>
<li><p><strong>Preset specification:</strong> CSV data sources from In Carta Image Analysis Software may use the configuration preset <code class="code docutils literal notranslate"><span class="pre">convert(...,</span> <span class="pre">preset=&quot;in-carta&quot;,</span> <span class="pre">...)</span></code> (<a class="reference internal" href="python-api.html#cytotable.convert.convert" title="cytotable.convert.convert"><code class="xref py py-mod docutils literal notranslate"><span class="pre">convert()</span></code></a>).</p></li>
</ul>
</div></blockquote>
</section>
</section>
</section>
<section id="data-destinations">
<h2>Data Destinations<a class="headerlink" href="#data-destinations" title="Link to this heading">¶</a></h2>
<section id="data-destination-locations">
<h3>Data Destination Locations<a class="headerlink" href="#data-destination-locations" title="Link to this heading">¶</a></h3>
<p>Converted data destinations are may be provided to CytoTable using only local filepaths (in contrast to data sources, which may also be remote).
Specify the converted data destination using the  <code class="code docutils literal notranslate"><span class="pre">convert(...,</span> <span class="pre">dest_path=&quot;&lt;a</span> <span class="pre">local</span> <span class="pre">filepath&gt;&quot;)</span></code> (<a class="reference internal" href="python-api.html#cytotable.convert.convert" title="cytotable.convert.convert"><code class="xref py py-mod docutils literal notranslate"><span class="pre">convert()</span></code></a>).</p>
</section>
<section id="data-destination-types">
<h3>Data Destination Types<a class="headerlink" href="#data-destination-types" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>Apache Parquet (<code class="docutils literal notranslate"><span class="pre">.parquet</span></code>)</strong>: “Apache Parquet is an open source, column-oriented data file format designed for efficient data storage and retrieval.
It provides efficient data compression and encoding schemes with enhanced performance to handle complex data in bulk.” (<a class="reference external" href="https://parquet.apache.org/">reference</a>)</p></li>
</ul>
<blockquote>
<div><p>Parquet data destination type may be specified by using <code class="code docutils literal notranslate"><span class="pre">convert(...,</span> <span class="pre">dest_datatype=&quot;parquet&quot;,</span> <span class="pre">...)</span></code> (<a class="reference internal" href="python-api.html#cytotable.convert.convert" title="cytotable.convert.convert"><code class="xref py py-mod docutils literal notranslate"><span class="pre">convert()</span></code></a>).</p>
</div></blockquote>
<ul class="simple">
<li><p><strong>scverse anndata (<code class="docutils literal notranslate"><span class="pre">.h5ad</span></code>, <code class="docutils literal notranslate"><span class="pre">.zarr</span></code>)</strong>: anndata is a Python package and data format for handling annotated data matrices which uses pandas and xarray to enable data management.
It offers many computationally efficient features including, among others, sparse data support, lazy operations, and a PyTorch interface. (<a class="reference external" href="https://anndata.readthedocs.io/en/stable/index.html">reference</a>)</p></li>
</ul>
<blockquote>
<div><p>Anndata data destination type may be specified by using <code class="code docutils literal notranslate"><span class="pre">convert(...,</span> <span class="pre">dest_datatype=&quot;anndata_h5ad&quot;,</span> <span class="pre">...)</span></code> (<a class="reference internal" href="python-api.html#cytotable.convert.convert" title="cytotable.convert.convert"><code class="xref py py-mod docutils literal notranslate"><span class="pre">convert()</span></code></a>) or <code class="code docutils literal notranslate"><span class="pre">convert(...,</span> <span class="pre">dest_datatype=&quot;anndata_zarr&quot;,</span> <span class="pre">...)</span></code> (<a class="reference internal" href="python-api.html#cytotable.convert.convert" title="cytotable.convert.convert"><code class="xref py py-mod docutils literal notranslate"><span class="pre">convert()</span></code></a>).</p>
</div></blockquote>
</section>
</section>
<section id="data-transformations">
<h2>Data Transformations<a class="headerlink" href="#data-transformations" title="Link to this heading">¶</a></h2>
<p>CytoTable performs various types of data transformations.
This section help define terminology and expectations surrounding the use of this terminology.
CytoTable might use one or all of these depending on user configuration.</p>
<section id="data-chunking">
<h3>Data Chunking<a class="headerlink" href="#data-chunking" title="Link to this heading">¶</a></h3>
<table>
<tr><th>Original</th><th>Changes</th></tr>
<tr>
<td>
<p>“Data source”</p>
<table>
<tr><th>Col_A</th><th>Col_B</th><th>Col_C</th></tr>
<tr><td>1</td><td>a</td><td>0.01</td></tr>
<tr><td>2</td><td>b</td><td>0.02</td></tr>
</table>
</td>
<td>
<p>“Chunk 1”</p>
<table>
<tr><th>Col_A</th><th>Col_B</th><th>Col_C</th></tr>
<tr><td>1</td><td>a</td><td>0.01</td></tr>
</table>
<p>“Chunk 2”</p>
<table>
<tr><th>Col_A</th><th>Col_B</th><th>Col_C</th></tr>
<tr><td>2</td><td>b</td><td>0.02</td></tr>
</table>
</td>
</tr>
</table>
<p><em>Example of data chunking performed on a simple table of data.</em></p>
<p>Data chunking within CytoTable involves slicing data sources into “chunks” of rows which all contain the same columns and have a lower number of rows than the original data source.
CytoTable uses data chunking through the <code class="docutils literal notranslate"><span class="pre">chunk_size</span></code> argument value (<code class="code docutils literal notranslate"><span class="pre">convert(...,</span> <span class="pre">chunk_size=1000,</span> <span class="pre">...)</span></code> (<a class="reference internal" href="python-api.html#cytotable.convert.convert" title="cytotable.convert.convert"><code class="xref py py-mod docutils literal notranslate"><span class="pre">convert()</span></code></a>)) to reduce the memory footprint of operations on subsets of data.
CytoTable may be used to create chunked data output by disabling concatenation and joins, e.g. <code class="code docutils literal notranslate"><span class="pre">convert(...,</span> <span class="pre">concat=False,join=False,</span> <span class="pre">...)</span></code> (<a class="reference internal" href="python-api.html#cytotable.convert.convert" title="cytotable.convert.convert"><code class="xref py py-mod docutils literal notranslate"><span class="pre">convert()</span></code></a>).
Parquet “datasets” are an abstraction which may be used to read CytoTable output data chunks which are not concatenated or joined (for example, see <a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.parquet.ParquetDataset.html">PyArrow documentation</a> or <a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.read_parquet.html">Pandas documentation</a> on using source paths which are directories).</p>
</section>
<section id="data-concatenations">
<h3>Data Concatenations<a class="headerlink" href="#data-concatenations" title="Link to this heading">¶</a></h3>
<table>
<tr><th>Original</th><th>Changes</th></tr>
<tr>
<td>
<p>“Chunk 1”</p>
<table>
<tr><th>Col_A</th><th>Col_B</th><th>Col_C</th></tr>
<tr><td>1</td><td>a</td><td>0.01</td></tr>
</table>
<p>“Chunk 2”</p>
<table>
<tr><th>Col_A</th><th>Col_B</th><th>Col_C</th></tr>
<tr><td>2</td><td>b</td><td>0.02</td></tr>
</table>
</td>
<td>
<p>“Concatenated data”</p>
<table>
<tr><th>Col_A</th><th>Col_B</th><th>Col_C</th></tr>
<tr><td>1</td><td>a</td><td>0.01</td></tr>
<tr><td>2</td><td>b</td><td>0.02</td></tr>
</table>
</td>
</tr>
</table>
<p><em>Example of data concatenation performed on simple tables of similar data “chunks”.</em></p>
<p>Data concatenation within CytoTable involves bringing two or more data “chunks” with the same columns together as a unified dataset.
Just as chunking slices data apart, concatenation brings them together.
Data concatenation within CytoTable typically occurs using a <a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.parquet.ParquetWriter.html">ParquetWriter</a> to assist with composing a single file from many individual files.</p>
</section>
<section id="data-joins">
<h3>Data Joins<a class="headerlink" href="#data-joins" title="Link to this heading">¶</a></h3>
<table>
<tr><th>Original</th><th>Changes</th></tr>
<tr>
<td>
<p>“Table 1” (notice <strong>Col_C</strong>)</p>
<table>
<tr><th>Col_A</th><th>Col_B</th><th>Col_C</th></tr>
<tr><td>1</td><td>a</td><td>0.01</td></tr>
</table>
<p>“Table 2” (notice <strong>Col_Z</strong>)</p>
<table>
<tr><th>Col_A</th><th>Col_B</th><th>Col_Z</th></tr>
<tr><td>1</td><td>a</td><td>2024-01-01</td></tr>
</table>
</td>
<td>
<p>“Joined data” (as Table 1 <a href="https://en.wikipedia.org/wiki/Join_(SQL)#Left_outer_join">left-joined</a> with Table 2)</p>
<table>
<tr><th>Col_A</th><th>Col_B</th><th>Col_C</th><th>Col_Z</th></tr>
<tr><td>1</td><td>a</td><td>0.01</td><td>2024-01-01</td></tr>
</table>
</td>
</tr>
<tr >
<td colspan="2" style="text-align:center;font-weight:bold;">
Join Specification in SQL
</td>
</tr>
<tr >
<td colspan="2">
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">Table_1</span>
<span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">Table_2</span><span class="w"> </span><span class="k">ON</span>
<span class="n">Table_1</span><span class="p">.</span><span class="n">Col_A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Table_2</span><span class="p">.</span><span class="n">Col_A</span><span class="p">;</span>
</pre></div>
</div>
</td>
</tr>
</table>
<p><em>Example of a data join performed on simple example tables.</em></p>
<p>Data joins within CytoTable involve bringing one or more data sources together with differing columns as a new dataset.
The word “join” here is interpreted through <a class="reference external" href="https://en.wikipedia.org/wiki/Join_(SQL)">SQL-based terminology on joins</a>.
Joins may be specified in CytoTable using <a class="reference external" href="https://duckdb.org/docs/sql/introduction.html">DuckDB-style SQL</a> through <code class="code docutils literal notranslate"><span class="pre">convert(...,</span> <span class="pre">joins=&quot;SELECT</span> <span class="pre">*</span> <span class="pre">FROM</span> <span class="pre">...</span> <span class="pre">JOIN</span> <span class="pre">...&quot;,</span> <span class="pre">...)</span></code> (<a class="reference internal" href="python-api.html#cytotable.convert.convert" title="cytotable.convert.convert"><code class="xref py py-mod docutils literal notranslate"><span class="pre">convert()</span></code></a>).
Also see CytoTable’s presets found here: <a class="reference internal" href="python-api.html#cytotable.presets.config" title="cytotable.presets.config"><code class="xref py py-data docutils literal notranslate"><span class="pre">presets.config</span></code></a> or via <a class="reference external" href="https://github.com/cytomining/CytoTable/blob/main/cytotable/presets.py">GitHub source code for presets.config</a>.</p>
<p>Note: data software outside of CytoTable sometimes makes use of the term “merge” to describe capabilities which are similar to join (for ex. <a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.merge.html"><code class="docutils literal notranslate"><span class="pre">pandas.DataFrame.merge</span></code></a>.
Within CytoTable, we opt to describe these operations with “join” to avoid confusion with software development alongside the technologies used (for example, <a class="reference external" href="https://duckdb.org/docs/archive/0.9.2/sql/introduction">DuckDB SQL</a> includes no <code class="docutils literal notranslate"><span class="pre">MERGE</span></code> keyword).</p>
</section>
</section>
<section id="pagination">
<h2>Pagination<a class="headerlink" href="#pagination" title="Link to this heading">¶</a></h2>
<p>CytoTable uses keyset pagination to help manage system-specific reasonable memory usage when working with large datasets.
<a class="reference external" href="https://en.wikipedia.org/wiki/Pagination">Pagination</a>, sometimes also called paging or “data chunking”, allows CytoTable to avoid loading entire datasets into memory at once while accomplishing tasks.
Keyset pagination leverages existing column data as <em>pagesets</em> to perform data extractions which focus on only a subset of the data as defined within the <em>pageset</em> keys (see example usage below).
We use keyset pagination to reduce the overall memory footprint during extractions where other methods inadvertently may not scale for whole dataset work (such as offset-based pagination, which extracts then drops the offset data)(<a class="reference external" href="https://use-the-index-luke.com/no-offset">see here for more information</a>).</p>
<p>Keyset pagination definitions may be defined using the <code class="docutils literal notranslate"><span class="pre">page_keys</span></code> parameter: <code class="code docutils literal notranslate"><span class="pre">convert(...,</span> <span class="pre">page_keys={&quot;table_name&quot;:</span> <span class="pre">&quot;column_name&quot;</span> <span class="pre">},</span> <span class="pre">...)</span></code> (<a class="reference internal" href="python-api.html#cytotable.convert.convert" title="cytotable.convert.convert"><code class="xref py py-mod docutils literal notranslate"><span class="pre">convert()</span></code></a>).
The <code class="docutils literal notranslate"><span class="pre">page_keys</span></code> parameter expects a dictionary where the keys are names of tables and values which are columns to be used for the keyset pagination pages.
Pagination is implemented in conjunction with the <code class="docutils literal notranslate"><span class="pre">chunk_size</span></code> parameter which indicates the size of each page.
We provide preset configurations for these parameters through the <code class="docutils literal notranslate"><span class="pre">preset</span></code> parameter <code class="code docutils literal notranslate"><span class="pre">convert(...,</span> <span class="pre">preset=&quot;&quot;,</span> <span class="pre">...)</span></code>.
Customizing the <code class="docutils literal notranslate"><span class="pre">chunk_size</span></code> or <code class="docutils literal notranslate"><span class="pre">page_keys</span></code> parameters allows you to tune the process to the size of your data and the resources available on your system.
For large datasets, smaller chunk sizes or specific pagination columns can help manage the workload by enabling smaller, more manageable data extraction at a time.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">CytoTable</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=cytomining&repo=CytoTable&type=star&count=false&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#presets-and-manual-overrides">Presets and Manual Overrides</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-sources">Data Sources</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#data-source-locations">Data Source Locations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-source-types">Data Source Types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#data-destinations">Data Destinations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#data-destination-locations">Data Destination Locations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-destination-types">Data Destination Types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#data-transformations">Data Transformations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#data-chunking">Data Chunking</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-concatenations">Data Concatenations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-joins">Data Joins</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pagination">Pagination</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="presentations.html">Presentations</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="code_of_conduct.html">Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-api.html">Python API</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">CytoTable</a></li>
      <li>Next: <a href="tutorials.html" title="next chapter">Tutorials</a></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2022, Cytomining Community.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.1.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="_sources/overview.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>